<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/app-layout/app-drawer/app-drawer.html">
<link rel="import" href="../bower_components/app-layout/app-drawer-layout/app-drawer-layout.html">
<link rel="import" href="../bower_components/app-layout/app-header/app-header.html">
<link rel="import" href="../bower_components/app-layout/app-header-layout/app-header-layout.html">
<link rel="import" href="../bower_components/app-layout/app-scroll-effects/app-scroll-effects.html">
<link rel="import" href="../bower_components/app-layout/app-toolbar/app-toolbar.html">
<link rel="import" href="../bower_components/app-route/app-location.html">
<link rel="import" href="../bower_components/app-route/app-route.html">
<link rel="import" href="../bower_components/iron-pages/iron-pages.html">
<link rel="import" href="../bower_components/iron-selector/iron-selector.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../bower_components/paper-tabs/paper-tabs.html">
<link rel="import" href="../bower_components/paper-tabs/paper-tab.html">
<link rel="import" href="../bower_components/polymerfire/firebase-app.html">
<link rel="import" href="../bower_components/polymerfire/firebase-query.html">
<link rel="import" href="../bower_components/paper-tooltip/paper-tooltip.html">
<link rel="import" href="../bower_components/paper-fab-speed-dial/paper-fab-speed-dial.html">
<link rel="import" href="../bower_components/paper-fab-speed-dial/paper-fab-speed-dial-action.html">
<!-- <link rel="import" href="../bower_components/app-storage/app-indexeddb-mirror/app-indexeddb-mirror.html"> -->


<link rel="import" href="app-icons.html">
<link rel="lazy-import" href="daily-thoughts.html">
<link rel="lazy-import" href="company-thoughts.html">
<link rel="lazy-import" href="leadership-thoughts.html">
<link rel="lazy-import" href="leadership-articles.html">
<link rel="lazy-import" href="master-class.html">
<link rel="lazy-import" href="topleader-thoughts.html">
<link rel="lazy-import" href="leadership-podcasts.html">
<link rel="lazy-import" href="leadership-videos.html">
<link rel="lazy-import" href="leadership-ebooks.html">
<link rel="lazy-import" href="company-profile.html">
<link rel="lazy-import" href="company-staff.html">
<link rel="lazy-import" href="thoughts-management.html">
<link rel="lazy-import" href="read-articles.html">
<link rel="lazy-import" href="add-thoughts.html">
<link rel="lazy-import" href="add-article.html">
<link rel="lazy-import" href="add-podcast.html">
<link rel="lazy-import" href="add-video.html">
<link rel="lazy-import" href="add-voicemail.html">
<link rel="lazy-import" href="not-found.html">
<link rel="lazy-import" href="sign-in.html">
<link rel="lazy-import" href="my-pldp.html"> 
<link rel="lazy-import" href="about-pldp.html"> 
<link rel="lazy-import" href="user-profile.html">

<dom-module id="leadership-app">
  <template>
      <firebase-auth id="auth" user="{{_user}}" provider="google" status-known="{{statusKnown}}" on-error="handleError">
      </firebase-auth>
    <style>
      :host {
        --app-primary-color: #810029;
        /* --app-primary-color: #bf1e2e; */
        --app-primary-tabs-color: #2e2a29;
        /* --app-primary-tabs-color: #272727; */
        /* #C2000B */
        /* --app-status-color: #870006; */
        --app-status-color: #870006;
        --app-accent-color: var(--paper-teal-500);
        --app-primary-text: #333333;
        --app-main-background: #fafafa;
        --app-secondary-text: #ffffff;

        display: block;
      }
      app-drawer-layout:not([narrow]) [drawer-toggle] {
        display: none;
      }
      app-header {
        color: var(--app-secondary-text);
        background-color: var(--app-primary-color);
        /* height: 220px;
      z-index: auto; */
      }
      app-header paper-icon-button {
        --paper-icon-button-ink-color: var(--app-secondary-text);;
        margin: auto;
      }
      app-header app-toolbar {
        /* background-color: #6dc0ffdc; */
        background-color: var(--app-primary-color);
        /* background-color: #1c88e3; */
        color: var(--app-secondary-text);
        /* padding-bottom: 16px; */
        border-bottom: 1px solid #810029;
      }
      app-header app-toolbar > .main-title {
        width: 100%;
        text-align: center;
        font-weight: bolder;
        padding-top: 30px;
        font-size: 15pt;
        color: var(--app-secondary-text);
      }
      paper-fab{
        background-color: var(--paper-teal-500);
        color: black;
      }
      .bg-header {
        position: fixed;
        top: 0px;
        left: 0;
        width: 100%;
        height: 200px;
        background-color: var(--app-primary-color);
        color: var(--app-secondary-text);
        padding: 10px;
      }
      paper-tabs.top-menu-tabs {
        font-family: 'Roboto', 'Noto', sans-serif;
        -webkit-font-smoothing: antialiased;
        width: 100%;
        text-transform: uppercase;
        margin-top: 18px;
        /* margin-bottom: 20px; */
        display: flex;
        align-items: flex-end;
        background: var(--app-primary-tabs-color);
        color: var(--app-secondary-text);
        font-size: 10pt;
        --paper-tabs-selection-bar-color: #999;
      }
      .follow-container{
         border: 1px solid #e6e6e6;
          /* margin-top: 8px; */
          margin-bottom: 8px;
          background-color: #fff;
          padding: 8px;
          display: flex;
          font-weight: 600;
          font-size: 12pt;
      }
      .follower{
        margin-right: 16px;
      }
      .follow-number{
          color: var(--app-primary-color);
      }
      .link {
        @apply --layout-horizontal;
        @apply --layout-center-center;
        margin-bottom: 1px;
        color: var(--app-secondary-text);
        text-decoration: none;
        padding: 0 8px;
      }
      .drawer-list {
        margin-bottom: 0 20px;
      }
      .drawer-list p {
        @apply --paper-font-body2;
        color: rgb(136, 136, 136);
        padding: 0 10px;
      }
      .drawer-list a {
        display: block;
        padding: 0 16px;
        text-decoration: none;
        font-size: 10pt;
        color: var(--app-secondary-color);
        line-height: 40px;
        -webkit-user-select: none;
        user-select: none;
      }
      .drawer-list a:hover {
        color: var(--app-primary-color);
      }
      .drawer-list a.iron-selected {
        color: var(--app-primary-color);
        font-weight: bold;
        -webkit-user-select: none;
        user-select: none;
      }
      .drawer-list hr {
        border: 0.6px solid #ccc;
      }
      .drawer-list paper-icon-button {
        padding: 10px;
        margin-top: 6px;
      }
      app-drawer {
        --app-drawer-scrim-background: rgba(171, 176, 180, 0.644);
        --app-drawer-content-container: {
          background-color: var(--app-main-background);
          color: var(--app-primary-text);
        }
      }
      .contact-info {
        margin: 10px 0 0 0;
        text-align: left;
        /* color: var(--app-primary-text); */
        color: #000;
        font-size: 11pt;
        padding: 0 0 10px 10px;
      }
      .contact-info .name {
        font-weight: bolder;
        font-size: 14pt;
      }
      .contact-info .email {
        font-weight: normal;
        font-size: 10pt;
      }
      .add-thought-link{
        text-decoration: none;
        color: var(--app-primary-text);
      }
      .avatar-container {
        position: relative;
        height: 90px;
        padding: 2px;
        width: 60%;
        margin: 20px auto;
      }
      .card-avatar {
        background-repeat: no-repeat;
        background-size: cover;
        display: inline-block;
        height: 48px;
        width: 48px;
        border-radius: 50%;
      }
      .card-avatar-drawer {
        background-repeat: no-repeat;
        background-size: cover;
        display: inline-block;
        height: 36px;
        width: 36px;
        margin-left: 20px;
        margin-top: 20px;
        border-radius: 50%;
        margin-right: 12px;
      }
      .company-logo {
        background-repeat: no-repeat;
        background-size: cover;
        width: 100%;
        height: 100%;
        border-radius: 2px;
        justify-content: center;
        align-items: center;
        display: flex;
      }
      .company-header{
        display: flex;
        flex-direction: column;
        /* height: 200px; */
        padding: 10px;
        align-items: flex-start;
        /* background-color: #f1f1f1b6; */
        background-color: var(--app-primary-color);
      }
      paper-fab-speed-dial{
        bottom: 0px;
        right: 12px;
        position: fixed;
      }
      paper-fab-speed-dial-action{
        background-color: var(--app-secondary-color);
        cursor: pointer;
      }
      .logo-l{
        display: inline-block;
      }
      .logo-xs{
        display: none;
      }
      .main{
        position: absolute;
        top: 188px;
        left: 0;
        right: 0;
        padding: 4px 4px 4px;
        box-sizing: border-box;
        background-color: var(--app-main-background);
        margin: 0 30px;
        border-radius: 2px;
      }
      @media screen and (max-width: 990px) {
        .main{
          margin: 0 8px;
          
        }
        
      }
      @media screen and (max-width: 360px) {
        .main{
          margin: 0 4px;
          /* top: 150px; */
        }
        
      }
      @media screen and (max-width: 640px) {
        app-drawer {
          --app-drawer-scrim-background: rgba(171, 176, 180, 0.644);
          --app-drawer-content-container: {
            background-color: #ffffff;
            color: var(--app-primary-text);
          }
        }

        app-header app-toolbar > .main-title {
          font-weight: bolder;
          font-size: 14pt;
          padding-top: 20px;
          color: var(--app-secondary-text);
        }
      }
      .style-10::-webkit-scrollbar-track
      {
        border-radius: 0px;
        opacity: 0;
        width:5px !important;
      }

      .style-10::-webkit-scrollbar
      {
        z-index: 999;
        display: block;
        width:5px !important;
        position: relative;
        opacity: 0;
      }
      .style-10:hover::-webkit-scrollbar{
        background: transparent !important;
        display: block;
      }

      .style-10::-webkit-scrollbar-thumb
      {
        opacity: 1 !important;
        width: 5px !important;
        background-color: rgba(0,0,0,0.3);
        box-shadow: 0px 0px 5px rgba(0,0,0,0.2);
        border-radius: 5px;
        position: relative !important;
        z-index: 122222000 !important;
      }
    app-toolbar {
      height: 120px;
    }
    @media (max-width: 719px) {
      .logo-xs{
        display: inline-block;
      }
      .logo-l{
        display: none;
      }
    }

    @-webkit-keyframes fadeInUp{
        0%{opacity:0;-webkit-transform:translateX(20px);transform:translateX(20px)}
        100%{opacity:1;-webkit-transform:translateX(0);transform:translateX(0)}
    }
    @keyframes fadeInUp{
        0%{opacity:0;-webkit-transform:translateX(20px);-ms-transform:translateX(20px);transform:translateX(20px)}
        100%{opacity:1;-webkit-transform:translateX(0);-ms-transform:translateX(0);transform:translateX(0)}
    }
    .fadeInUp{
        -webkit-animation-name:fadeInUp;
        animation-name:fadeInUp;
        opacity: 0;
        -webkit-animation-duration: 0.5s;
        animation-duration: 0.5s;
        -webkit-animation-fill-mode: forwards;
        animation-fill-mode: forwards;
        animation-timing-function: ease-in;
    }

    #container{
      position: absolute;
      z-index: 999999;
      width: 100%;
      right: 0;
    }
    #backbtn{
      display: none;
    }
    .background-indigo{
      background-color: var(--app-status-color);
      color: var(--app-secondary-text);
    }
    .rate-top-flex{
      display: flex;
      flex-wrap: nowrap;
      align-items: center;
    }
    .rate-top-flex > .rate-title{
      flex-grow: 8;
    }
    .rate-title > h1{
      font-size: 20px;
      color: var(--app-secondary-text);
      margin: 0;
      padding: 4px;
      text-align: center;
    }
      /* ============ Snack Bar ======================== */
      #snackbar {
          visibility: hidden;
          min-width: 250px;
          margin-left: -120px;
          background-color: var(--paper-green-400);
          color: #fff;
          text-align: center;
          border-radius: 2px;
          padding: 10px;
          position: fixed;
          z-index: 1;
          left: 40%;
          bottom: 30px;
          font-size: 14px;
          white-space: pre-wrap;
      }

      #snackbar.show {
          visibility: visible;
          -webkit-animation: fadein 0.5s, fadeout 0.5s 2.5s;
          animation: fadein 0.5s, fadeout 0.5s 2.5s;
      }

      @-webkit-keyframes fadein {
          from {bottom: 0; opacity: 0;} 
          to {bottom: 30px; opacity: 1;}
      }

      @keyframes fadein {
          from {bottom: 0; opacity: 0;}
          to {bottom: 30px; opacity: 1;}
      }

      @-webkit-keyframes fadeout {
          from {bottom: 30px; opacity: 1;} 
          to {bottom: 0; opacity: 0;}
      }

      @keyframes fadeout {
          from {bottom: 30px; opacity: 1;}
          to {bottom: 0; opacity: 0;}
      }

    </style>

    <app-location
        route="{{route}}"
        url-space-regex="^[[rootPath]]">
    </app-location>

    <app-route
        route="{{route}}"
        pattern="[[rootPath]]:page"
        data="{{routeData}}"
        tail="{{subroute}}">
    </app-route>

    <!-- Get company info -->
    <template is="dom-if" if="[[_companyid]]">
        <firebase-query
        id="qrycompany"
        path="/companies"
        order-by-child="companyID"
        start-at="[[_companyid]]"
        limit-to-first="1"
        data="{{companyData}}">
      </firebase-query>

      <!-- <app-indexeddb-mirror
        session="[[user.userID]]"
        key="keycompanydata"
        data="{{ldpcompanyData}}"
        persisted-data="{{companyData}}">
      </app-indexeddb-mirror> -->

      <firebase-query
        id="qryuser"
        path="/users"
        order-by-child="uid"
        start-at="[[_user.uid]]"
        limit-to-first="1"
        data="{{usersData}}">
      </firebase-query>

      <!-- <app-indexeddb-mirror
        session="[[user.userID]]"
        key="keyuserdata"
        data="{{ldpusersData}}"
        persisted-data="{{usersData}}">
      </app-indexeddb-mirror> -->
    </template>

    <app-drawer-layout fullbleed narrow="{{narrow}}">
      <!-- Drawer content slot="drawer"-->
      <app-drawer id="drawer" slot="drawer" swipe-open="[[narrow]]">
        <div class="style-10" style="height: 100%; overflow-y: auto; position:relative;">
          <app-toolbar class="company-header" style="background-color: var(--app-primary-color);">
            <div class="company-logo" >
                <iron-image class="logo-s" alt="The Leadership Platform" src="../../data/logo-s.png"></iron-image>
            </div>
          </app-toolbar>
          <div class="contact-info">
              <div class="name">[[user.firstName]] [[user.lastName]]</div>
              <div class="email">[[user.email]]</div>
            </div>
            <div style="height: 100%; -webkit-user-select: none;
            user-select: none;">
              <div class="follow-container">
                  <div class="follower"><span class="follow-number">108</span> Followers </div>
                  <div class="following"><span class="follow-number">121</span> Following</div>
              </div>
              <iron-selector selected="[[page]]" attr-for-selected="name" class="drawer-list" role="navigation">
                <p>Leadership News</p>
                <a style="-webkit-user-select: none;
                user-select: none;" name="daily-thoughts" href="[[rootPath]]daily-thoughts"><paper-icon-button icon="app:message"></paper-icon-button>Daily Leadership Thoughts</a>
                <a name="company-thoughts" href="[[rootPath]]company-thoughts">
                    <paper-icon-button icon="app:message"></paper-icon-button>Company Thoughts</a>
                <template is="dom-if" if="[[mythoughts]]">
                    <a name="leadership-thoughts" href="[[rootPath]]leadership-thoughts">
                        <paper-icon-button icon="app:message"></paper-icon-button>My Leadership Thoughts</a>
                </template>
                <hr>
                <p>Leadership Message</p>
                <a name="leadership-articles" href="[[rootPath]]leadership-articles"><paper-icon-button icon="app:remove-red-eye"></paper-icon-button>Leadership Articles</a>
                <a name="master-class" href="[[rootPath]]master-class"><paper-icon-button icon="app:book"></paper-icon-button>Leadership Master Class</a>
                <a name="topleader-thoughts" href="[[rootPath]]topleader-thoughts">
                    <paper-icon-button icon="app:message"></paper-icon-button>Top Leader Thoughts</a>
                <hr>
                <p>Leadership Media</p>
                <a name="leadership-podcasts" href="[[rootPath]]leadership-podcasts"><paper-icon-button icon="app:mic"></paper-icon-button>Leadership Podcasts</a>
                <a name="leadership-videos" href="[[rootPath]]leadership-videos"><paper-icon-button icon="app:videocam"></paper-icon-button>Leadership Videos</a>
                <hr>
                <p>Leadership Read</p>
                <a name="leadership-ebooks" href="[[rootPath]]leadership-ebooks"><paper-icon-button icon="app:library-books"></paper-icon-button>Leadership eBooks</a>
                <hr>
                <p>Development Plan</p>
                <a name="my-pldp" href="[[rootPath]]my-pldp"><paper-icon-button icon="app:library-books"></paper-icon-button>Leadership PLDP</a>
                <hr>
                <template is="dom-if" if="[[companyprofile]]">
                  <p>Company Profile</p>
                  <a name="company-profile" href="[[rootPath]]company-profile"><paper-icon-button icon="app:content-paste"></paper-icon-button>Company Profile</a>
                  <a name="company-staff" href="[[rootPath]]company-staff"><paper-icon-button icon="app:person"></paper-icon-button>Company Staff</a>
                  <a name="thoughts-management" href="[[rootPath]]thoughts-management" ><paper-icon-button icon="app:book"></paper-icon-button>Daily Thought Management</a>
                  <hr>
                </template>
                <p>Sign Out</p>
                <a name="sign-out" on-tap="logout" href="[[rootPath]]leadership-platform"><paper-icon-button icon="app:input"></paper-icon-button>Sign Out</a>
            </iron-selector>
          </div>
        </div>
      </app-drawer>

      <!-- Main content -->
      <!-- <app-header-layout has-scrolling-region> -->
      <app-header-layout>
        <app-header slot="header" reveals>
          <app-toolbar>
            <paper-icon-button icon="app:menu" drawer-toggle></paper-icon-button>
            <div main-title class="main-title">
              <iron-image class="logo-l" alt="The Leadership Platform" src="../../data/logo-l.png"></iron-image>
              <iron-image class="logo-xs" alt="The Leadership Platform" src="../../data/logo-xs.png"></iron-image>
            </div>
            <a href="user-profile" class="add-thought-link">
              <div id="userAvatar" class="card-avatar" style$="[[_photo(photo)]]"></div>
            </a>
            
          </app-toolbar>
          <paper-tabs class="top-menu-tabs" selected="[[_selected]]" scrollable slide>
              <paper-tab id="tabdaily" link><a href="daily-thoughts" class="link" tabindex="-1">Daily Leadership Thoughts</a></paper-tab>
              <paper-tab id="tabcompany" link><a href="company-thoughts" class="link" tabindex="-1">Company Thoughts</a></paper-tab>
                <template is="dom-if" if="[[mythoughts]]">
                  <paper-tab link><a href="leadership-thoughts" class="link" tabindex="-1">My Leadership Thoughts</a></paper-tab>
                </template>
              <paper-tab link><a href="leadership-articles" class="link" tabindex="-1">Leadership Articles</a></paper-tab>
              <paper-tab link><a href="master-class" class="link" tabindex="-1">Leadership MasterClass</a></paper-tab>
              <paper-tab link><a href="topleader-thoughts" class="link" tabindex="-1">Top Leader Thoughts</a></paper-tab>
              <paper-tab link><a href="leadership-podcasts" class="link" tabindex="-1">Leadership Podcasts</a></paper-tab>
              <paper-tab link><a href="leadership-videos" class="link" tabindex="-1">Leadership Videos</a></paper-tab>
              <paper-tab link><a href="leadership-ebooks" class="link" tabindex="-1">Leadership eBooks</a></paper-tab>
              <paper-tab link><a href="my-pldp" class="link" tabindex="-1">My PLDP</a></paper-tab>
              <template is="dom-if" if="[[companyprofile]]">
                  <paper-tab link><a href="company-profile" class="link" tabindex="-1">Company Profile</a></paper-tab>
                  <paper-tab link><a href="company-staff" class="link" tabindex="-1">Leadership Staff</a></paper-tab>
              </template>
          </paper-tabs>
        </app-header>
        <div id="maincontainer">
          <div id="backbtn" class="row background-indigo rate-top-flex">
            <div class="back-btn fadeInUp background-indigo">
              <paper-icon-button icon="app:arrow-back" on-tap="_removeLoadElement"></paper-icon-button>
            </div>
            <div class="rate-title">
              <h1 id="thoughtCaption"></h1>
            </div>
          </div>
          <div id="container" on-click="showConsole">
          </div>
        </div>
        
        <main id="main" class="main">
          <!-- <paper-button id="btnlement1" raised on-tap="_loadElement1" indexed="about-pldp">Load Element</paper-button> -->
          
          <iron-pages
            selected="[[page]]"
            attr-for-selected="name"
            fallback-selection="not-found"
            role="main">
            <daily-thoughts name="daily-thoughts" _companyid="[[_companyid]]" user="[[user]]"></daily-thoughts>
            <company-thoughts name="company-thoughts" _companyid="[[_companyid]]" user="[[user]]"></company-thoughts>
            <leadership-thoughts name="leadership-thoughts" _companyid="[[_companyid]]" user="[[user]]"></leadership-thoughts>
            <leadership-articles name="leadership-articles" _companyid="[[_companyid]]" user="[[user]]"></leadership-articles>
            <master-class name="master-class" _companyid="[[_companyid]]" user="[[user]]"></master-class>
            <topleader-thoughts name="topleader-thoughts" _companyid="[[_companyid]]" user="[[user]]"></topleader-thoughts>
            <leadership-podcasts name="leadership-podcasts" _companyid="[[_companyid]]" user="[[user]]"></leadership-podcasts>
            <leadership-videos name="leadership-videos" _companyid="[[_companyid]]" user="[[user]]"></leadership-videos>
            <leadership-ebooks name="leadership-ebooks" _companyid="[[_companyid]]" user="[[user]]"></leadership-ebooks>
            <company-profile name="company-profile" _companyid="[[_companyid]]" user="[[user]]"></company-profile>
            <company-staff name="company-staff" _companyid="[[_companyid]]" user="[[user]]"></company-staff>
            <thoughts-management name="thoughts-management" _companyid="[[_companyid]]" user="[[user]]" previouspage="[[previousPage]]"></thoughts-management>
            <my-pldp name="my-pldp" _companyid="[[_companyid]]" user="[[user]]" previouspage="[[previousPage]]"></my-pldp>
            <about-pldp name="about-pldp" _companyid="[[_companyid]]" user="[[user]]" previouspage="[[previousPage]]"></about-pldp>
            <add-thoughts name="add-thoughts" _companyid="[[_companyid]]" user="[[user]]" previouspage="[[previousPage]]" addedit="[[addedit]]" company="[[company]]"></add-thoughts>
            <add-article name="add-article" _companyid="[[_companyid]]" user="[[user]]" previouspage="[[previousPage]]"></add-article>
            <read-articles name="read-articles" _companyid="[[_companyid]]" user="[[user]]" author="[[bookAuthor]]" title="[[bookTitle]]" body="[[bookBody]]" photo="[[bookPhoto]]"></read-articles>
            <user-profile name="user-profile" _companyid="[[_companyid]]" user="[[user]]" previouspage="[[previousPage]]" photo="[[photo]]"></user-profile>
            <add-podcast name="add-podcast" _companyid="[[_companyid]]" user="[[user]]" previouspage="[[previousPage]]"></add-podcast>
            <add-video name="add-video" _companyid="[[_companyid]]" user="[[user]]" previouspage="[[previousPage]]"></add-video>
            <add-voicemail name="add-voicemail" _companyid="[[_companyid]]" user="[[user]]" previouspage="[[previousPage]]"></add-voicemail>
            <sign-in name="sign-in"></sign-in>
          </iron-pages>
        </main>
      </app-header-layout>

      <paper-fab-speed-dial id="paperSpeed">
        <template is="dom-if" if="[[addthoughts]]">
            <paper-fab-speed-dial-action icon="app:message" on-tap="_loadElement1" indexed="add-thoughts" caption="Add Thought">Thought</paper-fab-speed-dial-action>
        </template>
        <template is="dom-if" if="[[addarticle]]">
            <paper-fab-speed-dial-action icon="app:remove-red-eye" on-tap="_loadElement1" indexed="add-article" caption="Add Article">Article</paper-fab-speed-dial-action>
        </template>
          <paper-fab-speed-dial-action icon="app:record-voice-over" on-tap="_loadElement1" indexed="add-voicemail" caption="Add Voicemail">Voicemail</paper-fab-speed-dial-action>
          <paper-fab-speed-dial-action icon="app:mic" on-tap="_loadElement1" indexed="add-podcast" caption="Add Podcast">Podcast</paper-fab-speed-dial-action>
          <paper-fab-speed-dial-action icon="app:videocam" on-tap="_loadElement1" indexed="add-video" caption="Add Video">Video</paper-fab-speed-dial-action>
      </paper-fab-speed-dial>
    </app-drawer-layout>

    <div id="snackbar"></div>
  </template>

  <script>
    class MyApp extends Polymer.Element {
      static get is() { return 'leadership-app'; }
      static get properties() {
        return {
          page: {
            type: String,
            reflectToAttribute: true,
            observer: '_pageChanged',
          },
          routeData: Object,
          subroute: String,
          // This shouldn't be neccessary, but the Analyzer isn't picking up
          // Polymer.Element#rootPath
          rootPath: String,
          _selected: {
            type: Number,
            value: 0,
            notify: true
          },
          statusKnown: {
            type: Object
          },
          company: {
              type: Object
          },
          _companyPhoto: {
              type: Object
          },
          companyData: {
              type: Object,
              observer: '_onCompanyDataReceived'
          },
          companyPhotos:{
            type: Object,
            observer: '_onCompanyPhotoChange'
          },
          addthoughts: Boolean,
          approvethoughts: Boolean,
          addarticle: Boolean,
          companyprofile: Boolean,
          mythoughts: Boolean,
          _user: {
              type: Object
          },
          userData: {
            type: Object,
            observer: '_userDataChange'
          },
          user: {
            type: Object
          },
          photo: {
            type: String
          },
          _companyid: String,
          bookAuthor: String,
          bookTitle: String,
          bookBody: String,
          bookPhoto: String,
          previousPage: String,
          ID: String,
          Title: String,
          Subtitle: String,
          aID: String,
          rateType: String,
          orderRateBy: String,
          commentType: String,
          orderCommentBy: String,
          addedit: Number,
        };
      }
      _myLoadElement(elementName, htmlImport) {
            // Let's remove last loaded element if exists
            this._removeElement();
            this.$.main.style.display = 'none';
            this.$.backbtn.style.display = 'flex';
            var container = Polymer.dom(this.root).querySelector('#container');
            var __companyid = this._companyid;
            var __user = this.user;
            var previousPage = this.previousPage;
            var company = this.company;

            // Now we load it on-the-fly
            Polymer.importHref(this.resolveUrl(htmlImport), function (e) {
                // Create a new instance
                var myElement = document.createElement(elementName);
                // And add it to the container
                container.appendChild(myElement);
                // Lets set a dummy property just to show how to do it
                myElement._companyid = __companyid;
                myElement.user = __user;
                myElement.company = company;

                if((elementName === "add-thoughts") || (elementName === "add-article") || (elementName === "add-podcast") || (elementName === "add-video") || (elementName === "add-voicemail") ){
                  myElement.addedit = 0;
                  sessionStorage.setItem("closeElement", false);
                } 
            });
        }
        _activeChanged(){
          console.log("Here I am: "+this.closeChild);
          return "Test";
        }
        showConsole(){
          var closeElement = sessionStorage.getItem("closeElement");

          console.log("Clicked: "+closeElement);

          if(closeElement === "true"){
            this._removeLoadElement();
            this.showSnackBar("Record posted successfully!");
          }
          
        }
        showSnackBar(msg){
        var x = this.$.snackbar;

          x.innerHTML = msg;

          x.className = "show";
          setTimeout(function(){ x.className = x.className.replace("show", ""); }, 3000);
        }
        _loadElement1(e){
          // var name = Polymer.dom(this.root).querySelector('#'+e.target.id).data;
          var name = e.target.getAttribute('indexed');
          var caption = e.target.getAttribute('caption');
          this.$.thoughtCaption.innerHTML = caption;
          this.$.paperSpeed.style.visibility = 'hidden';
          
            // Pay attention to this path.
            // This IS NOT relative to this component.
            // Its relative to current loaded HTML page which contains app-test element
            // (read the "IMPORTANT NOTE:" section of this post before proceeding)
            // Load your element in the line below
            this._myLoadElement(name, name+".html");
        }
        _removeLoadElement(){
          this._removeElement();
          this.$.main.style.display = 'block';
          this.$.backbtn.style.display = 'none';
          this.$.paperSpeed.style.visibility = 'visible';
        }
        _loadElement2 () {
            // Load your element in the next line. Pay attention to the path.
            this._myLoadElement("my-other-element", "elements/myOtherElement.html");
        }
        _removeElement () {
          var container = Polymer.dom(this.root).querySelector('#container');

            // element.removeChild(element.firstChild);

            var element = container.querySelector("*");
            if (element) {
                element.parentNode.removeChild(element);
            }
        }
      _close(){
        this.$.paperSpeed.close();
      }
      _userDataChange(newData, oldData) {
        for (item in newData) {
            if(newData[item].photoURL != undefined || newData[item].photoURL) {
              this.photo = newData[item].photoURL;
            }else{
              this.photo = "../images/profile/default-user.png";
            }
        }
      }
      _addedit(){
        // Add Thought
        this.addedit = 0;
        sessionStorage.setItem("addedit", this.addedit);
        this._close();
      }
       _onCompanyDataReceived(newData, oldData) {
          for (item in newData) { 
              this.company = newData[item];
              this.companyPhotos = newData[item].photos;
          }

          sessionStorage.setItem("user1", "Subscriber");
          sessionStorage.setItem("user2", "Company Staff");
          sessionStorage.setItem("user3", "Leader");
          sessionStorage.setItem("user4", "Platinum");
          sessionStorage.setItem("user5", "Gold");
          sessionStorage.setItem("user6", "Company Admin");
          sessionStorage.setItem("user7", "Platinum Admin");
          sessionStorage.setItem("user8", "Standard");

          sessionStorage.setItem("INTERNAL_DAILY_THOUGHT", "1");
          sessionStorage.setItem("GLOBAL_DAILY_THOUGHT", "2");

          sessionStorage.setItem("DESC_INTERNAL_DAILY_THOUGHT", "Internal Daily Thought");
          sessionStorage.setItem("DESC_GLOBAL_DAILY_THOUGHT", "Global Daily Thought");

          sessionStorage.setItem("APPROVED", "approved");
          sessionStorage.setItem("DECLINED", "declined");
          sessionStorage.setItem("PENDING", "pending");

      }
      _onCompanyPhotoChange(newData, oldData){
        for (item in newData) { 
              this._companyPhoto = newData[item];
          }
      }
      logout(){
          this.page = 'sign-in';
          return this.$.auth.signOut();
      }
      static get observers() {
        return [
          '_routePageChanged(routeData.page)',
        ];
      }

      _routePageChanged(page) {
        // If no page was found in the route data, page will be an empty string.
        // Default to 'view1' in that case.
        var oldpage = this.page;
        this.$.paperSpeed.style.visibility = 'visible';
        window.scrollTo(0, 0);

        if(page == 'leadership-platform' || page == 'components'){
          this.page = 'daily-thoughts';
          this._selected = 0;
        }else{
          this.page = page || 'daily-thoughts';
        }

        // Close a non-persistent drawer when the page & route are changed.
        if (!this.$.drawer.persistent) {
          this.$.drawer.close();
        }

          this._selected = page;
          var modselect = 0;

          var showmythoughts = localStorage.getItem("myThoughts");

          // control the selected tab
          if(showmythoughts == "false")
            modselect = 1;

          if(page == 'daily-thoughts')
            this._selected = 0;
          else if(page == 'company-thoughts')
            this._selected = 1;
          else if(page == 'leadership-thoughts')
            this._selected = 2;
          else if(page == 'leadership-articles')
            this._selected = 3 - modselect;
          else if(page == 'master-class')
            this._selected = 4 - modselect;
          else if(page == 'topleader-thoughts')
            this._selected = 5 - modselect;
          else if(page == 'leadership-podcasts')
            this._selected = 6 - modselect;
          else if(page == 'leadership-videos')
            this._selected = 7 - modselect;
          else if(page == 'leadership-ebooks')
            this._selected = 8 - modselect;
          else if(page == 'my-pldp'){
            this.$.paperSpeed.style.visibility = 'hidden';
            if(oldpage == 'my-pldp') oldpage = 'daily-thoughts';
            if(oldpage != undefined)
              this.previousPage = oldpage;
            else
              this.previousPage = "daily-thoughts";

            this._selected = 9 - modselect;
          }
          else if(page == 'company-profile')
            this._selected = 10 - modselect;
          else if(page == 'company-staff')
            this._selected = 11 - modselect;
          else if(page == 'thoughts-management'){
            
            if(oldpage == 'thoughts-management') oldpage = 'daily-thoughts';
            if(oldpage != undefined)
              this.previousPage = oldpage;
            else
              this.previousPage = "daily-thoughts";
          }
          else if(page == 'read-articles'){
            this.$.paperSpeed.style.visibility = 'hidden';
            this.bookAuthor = sessionStorage.getItem("bookAuthor");
            this.bookTitle = sessionStorage.getItem("bookTitle");
            this.bookBody = sessionStorage.getItem("bookBody");
            this.bookPhoto = sessionStorage.getItem("bookPhoto");
            this._selected = 12 - modselect;
          }
          else if(page == 'add-thoughts'){
            this.$.paperSpeed.style.visibility = 'hidden';
            if(oldpage == 'add-thoughts') oldpage = 'daily-thoughts';
            if(oldpage != undefined)
              this.previousPage = oldpage;
            else
              this.previousPage = "daily-thoughts";

            this.addedit = -1;

            this.addedit = sessionStorage.getItem("addedit");
            this._selected = 13;
          }
          else if(page == 'add-article'){
            this.$.paperSpeed.style.visibility = 'hidden';
            if(oldpage == 'add-article') oldpage = 'daily-thoughts';

            if(oldpage != undefined)
              this.previousPage = oldpage;
            else
              this.previousPage = "daily-thoughts";
            this._selected = 15;
          }
          else if(page == 'user-profile'){
            this.$.paperSpeed.style.visibility = 'hidden';
            if(oldpage == 'user-profile') oldpage = 'daily-thoughts';

            if(oldpage != undefined)
              this.previousPage = oldpage;
            else
              this.previousPage = "daily-thoughts";
            this._selected = 16;
          }
          else if(page == 'add-podcast'){
            this.$.paperSpeed.style.visibility = 'hidden';
            if(oldpage == 'add-podcast') oldpage = 'daily-thoughts';

            if(oldpage != undefined)
              this.previousPage = oldpage;
            else
              this.previousPage = "daily-thoughts";
            this._selected = 18;
          }
          else if(page == 'add-video'){
            this.$.paperSpeed.style.visibility = 'hidden';
            if(oldpage == 'add-video') oldpage = 'daily-thoughts';

            if(oldpage != undefined)
              this.previousPage = oldpage;
            else
              this.previousPage = "daily-thoughts";
            this._selected = 19;
          }
          else if(page == 'about-pldp'){
            this.$.paperSpeed.style.visibility = 'hidden';
            if(oldpage == 'about-pldp') oldpage = 'daily-thoughts';

            if(oldpage != undefined)
              this.previousPage = oldpage;
            else
              this.previousPage = "daily-thoughts";
            this._selected = 20;
          }
          else if(page == 'add-voicemail'){
            this.$.paperSpeed.style.visibility = 'hidden';
            if(oldpage == 'add-voicemail') oldpage = 'daily-thoughts';

            if(oldpage != undefined)
              this.previousPage = oldpage;
            else
              this.previousPage = "daily-thoughts";
            this._selected = 21;
          }

          // sessionStorage.setItem("_companyid", this._companyid);
      }
      _pageChanged(page) {
        // Load page import on demand. Show 404 page if fails
        var resolvedPageUrl = this.resolveUrl(page + '.html');
        Polymer.importHref(
            resolvedPageUrl,
            null,
            this._showPage404.bind(this),
            true);
      }

      _showPage404() {
        this.page = 'daily-thoughts';
        // this.page = 'view404';
      }

      _photo(photo){
        let photo_url = "background-image: url('../images/profile/default-user.png');";

        if (photo != "" || photo != undefined) { 
          photo_url = 'background-image: url('+photo+');';
        }

        return photo_url;
      }
    }

    window.customElements.define(MyApp.is, MyApp);
  </script>
</dom-module>
